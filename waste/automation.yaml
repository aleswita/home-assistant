alias: "Notifikace: svoz odpadu"
description: UpozornÃ­ den pÅ™edem na smÄ›snÃ½ odpad, plasty, papÃ­r nebo BIO odpad
triggers:
  - trigger: time
    at: "17:00:00"
conditions: []
actions:
  - variables:
      waste_tomorrow: >
        {% set array = [] %}

        {% if state_attr('sensor.svoz_smesneho_odpadu','daysTo') == 1 %}
          {% set array = array + ['âš« smÄ›snÃ½ odpad'] %}
        {% endif %}
        {% if state_attr('sensor.svoz_plastu', 'daysTo') == 1 %}
          {% set array = array + ['ğŸŸ¡ plasty'] %}
        {% endif %}
        {% if state_attr('sensor.svoz_papiru', 'daysTo') == 1 %}
          {% set array = array + ['ğŸ”µ papÃ­r'] %}
        {% endif %}
        {% if state_attr('sensor.svoz_bio_odpadu', 'daysTo') == 1 %}
          {% set array = array + ['ğŸŸ¤ BIO odpad'] %}
        {% endif %}

        {% if array | length == 0 %}
          {# do nothing #}
        {% elif array | length == 1 %}
          {{ array[0] }}
        {% else %}
          {{ array[:-1] | join(', ') }} a {{ array[-1] }}
        {% endif %}
  - condition: template
    value_template: "{{ waste_tomorrow | length > 0 }}"
  - action: notify.mobile_app_ales # pÅ™enastav podle sebe
    data:
      title: ğŸš› ZÃ­tra je svoz odpadu!
      message: "PÅ™iprav: {{ waste_tomorrow }}"
      data:
        push:
          sound: default
          badge: 1
          tag: waste_collection
        url: /dashboard-home/1 # pÅ™enastav podle sebe
